{
  "hash": "70665103e0c05ed6bbb46839e9cc1973",
  "result": {
    "markdown": "---\ntitle: \"Catálogo de Productos en Google Drive\"\nauthor: \"Miguel Equihua\"\ndate: \"2023-12-1\"\ncategories: [conceptos,herramientas]\nlang: es\nfilters:\n  - interactive-sql\ndatabases:\n  - name: atlas-y-cat.db\n    path: \"./\"\nformat:\n  html:\n    toc: true\n    toc-title: Contenido\n    code-fold: true\n---\n\n\n\n\nLa aplicación para operar rutinaria y automáticamente con *Google Drive* para registrar en una base de datos *SQLite* los productos contenidos de los Pronaii ya está lista.\n\n\n::: {.cell}\n\n:::\n\n\nAhora podemos ver la lista de tablas que tiene la base dde datos.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Show List of Tables\nas.data.frame(dbListTables(con_datos))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  dbListTables(con_datos)\n1               conceptos\n2             drive_files\n3           drive_folders\n4             drive_users\n5               temas_doc\n```\n:::\n:::\n\n\n¿Qué proyectos hay en el *atlas-catálogo*?\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Get table\ndbReadTable(con_datos, 'drive_folders') %>% \n  select(name, id) %>% \n  filter(!(grepl(\"0-control|Materiales para\", name))) %>% \n  kable(col.names = c(\"Carpeta\", \"Google Drive id\"))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Carpeta </th>\n   <th style=\"text-align:left;\"> Google Drive id </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Pronaii_FAN </td>\n   <td style=\"text-align:left;\"> 1Jf0zNGVo5tQI5BgH_FwwqtEpIUeIRgN7 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Pronaii_Katuwan </td>\n   <td style=\"text-align:left;\"> 1J-UpFD9uq-g5JgZ8phUJjIDHFfBKbMQ9 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Pronaii_NAICM </td>\n   <td style=\"text-align:left;\"> 1m2kUJKV_HxT-dRtdZmRy2RG-raQgmOp8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Pronaii_Territorios Cafetaleros </td>\n   <td style=\"text-align:left;\"> 1zQ44e3zJNB6aKT9-ERXYQxYyj937HiIr </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Pronaii_Tren Maya </td>\n   <td style=\"text-align:left;\"> 1PQTWTyI0xjNGOPNNIToTC5S8Awt8kVZv </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Pronaii_AugeMezcalero </td>\n   <td style=\"text-align:left;\"> 1kvIm0U8ex27zvwIfWTkEc1b-affqHWxK </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Pronaii_Abejas </td>\n   <td style=\"text-align:left;\"> 1IyhAk2S-dttwTvzmCvDMewV8utk3G9S1 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nAhora, veamos cuántos documentos hay en cada uno de estos proyectos.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndbReadTable(con_datos, \"drive_folders\") %>%\n      filter(!grepl(\"0-control|Materiales para\", name)) %>%\n      select(id, name) %>% \n      full_join(dbReadTable(con_datos, \"drive_files\"), \n                 by = join_by(id == X_parent), suffix = c(\"\", \".file\")) %>% \n      select(id, name, name.file) %>% \n      group_by(name) %>% \n      summarise(docs = sum(!is.na(name.file), na.rm = TRUE)) %>% \n      filter(!is.na(name)) %>%\n      kable(col.names = c(\"Proyecto\", \"Num docs\"))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Proyecto </th>\n   <th style=\"text-align:right;\"> Num docs </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Pronaii_Abejas </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Pronaii_AugeMezcalero </td>\n   <td style=\"text-align:right;\"> 1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Pronaii_FAN </td>\n   <td style=\"text-align:right;\"> 11 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Pronaii_Katuwan </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Pronaii_NAICM </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Pronaii_Territorios Cafetaleros </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Pronaii_Tren Maya </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}